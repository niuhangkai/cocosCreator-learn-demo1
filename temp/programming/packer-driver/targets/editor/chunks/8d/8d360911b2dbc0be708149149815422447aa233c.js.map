{"version":3,"sources":["file:///Users/mac20211105/Desktop/cocosCreator-demo-learn/AircraftWars/assets/Scripts/EnemyManager.ts"],"names":["_decorator","Component","Prefab","instantiate","randomRangeInt","ccclass","property","EnemyManager","start","schedule","generateEnemy0","enemy0Frequency","generateEnemy1","enemy1Frequency","generateEnemy2","enemy2Frequency","generateReward1","reward1Frequency","update","deltaTime","onDestroy","unschedule","generateEnemy","enemy0Prefab","enemy1Prefab","enemy2Prefab","generateReward","rewardPrefab1","prefab","frequency","x","y","enemy","node","addChild","randomX","setPosition","active","random","rewardPrefab2","reward"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate, randomRangeInt } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('EnemyManager')\nexport class EnemyManager extends Component {\n    // 小飞机生成频率,1s一个\n    @property\n    enemy0Frequency: number = 1\n    // 小飞机预制体，从场景中获取。prefab类型必须有\n    @property(Prefab)\n    enemy0Prefab: Prefab = null;\n\n    // 中飞机生成频率,1s一个\n    @property\n    enemy1Frequency: number = 2\n    // 中飞机预制体，从场景中获取。prefab类型必须有\n    @property(Prefab)\n    enemy1Prefab: Prefab = null\n\n    // 大飞机生成频率,1s一个\n    @property\n    enemy2Frequency: number = 5\n    // 大飞机预制体，从场景中获取。prefab类型必须有\n    @property(Prefab)\n    enemy2Prefab: Prefab = null\n\n    \n    // 奖励生成速率\n    @property\n    reward1Frequency: number = 10\n    @property\n    reward2Frequency: number = 20\n    // 奖励预制体，从场景中获取。prefab类型必须有\n    @property(Prefab)\n    rewardPrefab1: Prefab = null\n    @property(Prefab)\n    rewardPrefab2: Prefab = null\n\n    start() {\n        // 每秒生成一个小飞机,schedule是定时器，最后一个参数是时间间隔，单位是秒\n        this.schedule(this.generateEnemy0, this.enemy0Frequency);\n        this.schedule(this.generateEnemy1, this.enemy1Frequency);\n        this.schedule(this.generateEnemy2, this.enemy2Frequency);\n        this.schedule(this.generateReward1, this.reward1Frequency);\n        // this.schedule(this.generateReward2, this.reward2Frequency);\n    }\n    \n    update(deltaTime: number) {\n        \n    }\n    protected onDestroy(): void {\n        this.unschedule(this.generateEnemy0);\n        this.unschedule(this.generateEnemy1);\n        this.unschedule(this.generateEnemy2);\n        this.unschedule(this.generateReward1);\n        // this.unschedule(this.generateReward2);\n    }\n    // 生成小飞机\n    generateEnemy0() {\n        this.generateEnemy(this.enemy0Prefab, this.enemy0Frequency, 215, 400);\n    }\n\n    // 生成中飞机\n    generateEnemy1() {\n        this.generateEnemy(this.enemy1Prefab, this.enemy1Frequency, 200, 450);\n    }\n\n    // 生成大飞机\n    generateEnemy2() {\n        this.generateEnemy(this.enemy2Prefab, this.enemy2Frequency, 150, 450);\n    }\n    // 生成奖励\n    generateReward1() {\n        this.generateReward(this.rewardPrefab1, this.reward1Frequency, 207, 482);\n    }\n    // generateReward2() {\n    //     this.generateReward(this.rewardPrefab2, this.reward2Frequency, 207, 482);\n    // }\n    \n    // 生成逻辑抽离\n    generateEnemy(prefab: Prefab, frequency: number, x: number, y: number) {\n        // 实例化小飞机\n        const enemy = instantiate(prefab);\n        // 添加到场景中,也就是EnemyManager的子节点中\n        this.node.addChild(enemy);\n        const randomX = randomRangeInt(-x, x);\n        enemy.setPosition(randomX, y, 0);\n        enemy.active = true;\n    }\n\n    generateReward(prefab: Prefab, frequency: number, x: number, y: number) {\n        // 随机生成0-2之间的数\n        const random = randomRangeInt(0, 2);\n        if (random === 0) {\n            prefab = this.rewardPrefab1;\n        } else {\n            prefab = this.rewardPrefab2;\n        }\n\n        const reward = instantiate(prefab);\n        this.node.addChild(reward);\n        const randomX = randomRangeInt(-x, x);\n        reward.setPosition(randomX, y, 0);\n        reward.active = true;\n    }\n}\n\n"]}