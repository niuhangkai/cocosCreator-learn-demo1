{"version":3,"sources":["file:///Users/mac20211105/Desktop/cocosCreator-demo-learn/AircraftWars/assets/Scripts/GameManager.ts"],"names":["_decorator","Component","Node","game","ccclass","property","GameManager","Number","getInstance","instance","onLoad","update","deltaTime","AddBombCount","bombCount","node","emit","AddScore","score","onPauseGame","pauseButton","active","resumeButton","setTimeout","pause","onResumeGame","resume"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAgBC,MAAAA,I,OAAAA,I;;;;;;;;;OAC1C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;6BAGjBM,W,WADZF,OAAO,CAAC,aAAD,C,UAIHC,QAAQ,CAACE,MAAD,C,UAIRF,QAAQ,CAACE,MAAD,C,UAIRF,QAAQ,CAACH,IAAD,C,UAGRG,QAAQ,CAACH,IAAD,C,sCAfb,MACaI,WADb,SACiCL,SADjC,CAC2C;AAAA;AAAA;;AAEvC;AAFuC;;AAMvC;AANuC;;AAUvC;AAVuC;;AAAA;AAAA;;AAmBd,eAAXO,WAAW,GAAG;AACxB,cAAI,CAAC,KAAKC,QAAV,EAAoB;AAChB,iBAAKA,QAAL,GAAgB,IAAIH,WAAJ,EAAhB;AACH;;AACD,iBAAO,KAAKG,QAAZ;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACLJ,UAAAA,WAAW,CAACG,QAAZ,GAAuB,IAAvB;AACH;;AAEDE,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEMC,QAAAA,YAAY,GAAG;AAClB,eAAKC,SAAL,IAAgB,CAAhB;AACA,eAAKC,IAAL,CAAUC,IAAV,CAAe,cAAf,EAA+B,KAAKF,SAApC;AACH;;AAEMG,QAAAA,QAAQ,CAACC,KAAD,EAAgB;AAC3B,eAAKA,KAAL,IAAcA,KAAd;AACA,eAAKH,IAAL,CAAUC,IAAV,CAAe,UAAf,EAA2B,KAAKE,KAAhC;AACH;;AACMC,QAAAA,WAAW,GAAG;AACjB;AACA;AACA,eAAKC,WAAL,CAAiBC,MAAjB,GAA0B,KAA1B;AACA,eAAKC,YAAL,CAAkBD,MAAlB,GAA2B,IAA3B,CAJiB,CAKjB;;AACAE,UAAAA,UAAU,CAAC,MAAM;AACbpB,YAAAA,IAAI,CAACqB,KAAL;AACH,WAFS,EAEP,GAFO,CAAV;AAGH;;AACMC,QAAAA,YAAY,GAAG;AAClB,eAAKL,WAAL,CAAiBC,MAAjB,GAA0B,IAA1B;AACA,eAAKC,YAAL,CAAkBD,MAAlB,GAA2B,KAA3B;AACAlB,UAAAA,IAAI,CAACuB,MAAL;AACH;;AAzDsC,O,UAkBxBjB,Q;;;;;iBAdK,C;;;;;;;iBAIJ,C;;;;;;;iBAII,I;;;;;;;iBAGC,I","sourcesContent":["import { _decorator, Component, Node, director, game, Button } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameManager')\nexport class GameManager extends Component {\n\n    // 当前炸弹数量\n    @property(Number)\n    bombCount: number = 0;\n\n    // 分数\n    @property(Number)\n    score: number = 0;\n\n    // 按钮状态\n    @property(Node)\n    pauseButton: Node = null;\n\n    @property(Node)\n    resumeButton: Node = null;\n\n\n    private static instance: GameManager;\n    public static getInstance() {\n        if (!this.instance) {\n            this.instance = new GameManager();\n        }\n        return this.instance;\n    }\n\n    onLoad() {\n        GameManager.instance = this;\n    }\n\n    update(deltaTime: number) {\n        \n    }\n    \n    public AddBombCount() {\n        this.bombCount+=1;\n        this.node.emit('AddBombCount', this.bombCount);\n    }\n\n    public AddScore(score: number) {\n        this.score += score;\n        this.node.emit('AddScore', this.score);\n    }\n    public onPauseGame() {\n        // director.pause()和game.pause()的区别\n        // director.pause();\n        this.pauseButton.active = false;\n        this.resumeButton.active = true;\n        // 延迟一帧\n        setTimeout(() => {\n            game.pause();\n        }, 100);\n    }\n    public onResumeGame() {\n        this.pauseButton.active = true;\n        this.resumeButton.active = false;\n        game.resume();\n    }\n}\n\n"]}